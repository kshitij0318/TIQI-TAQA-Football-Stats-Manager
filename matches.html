<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tiqi Taqa - Football Stats Manager</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        #teamSelection {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .teamSelectionBox {
            width: 200px;
            height: 150px;
            margin: 0 10px;
            background-color: #f0f0f0;
            border: 2px solid #ccc;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            position: relative;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .teamSelectionBox:hover {
            background-color: #e0e0e0;
        }
        .teamSelectionBox h3 {
            text-align: center;
            margin-top: 10px;
            font-size: 16px;
            color: #333;
        }
        .teamSelectionBox img {
            width: 80px;
            height: 80px;
            margin-top: 10px;
        }
        .teamSelectionBox.selected {
            border-color: #007bff;
            background-color: #f0f8ff;
        }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <div id="header"></div>
    <div id="matches">
        <h2>Team Selection</h2>
        <div>
            <label for="season" onclick="toggleDropdown()">Select Season:</label>
            <select id="season">
                <option value="95-96">1995-1996</option>
                <option value="96-97">1996-1997</option>
                <!-- Add options for other seasons -->
            </select>
        </div>
    </div>
    <div id="teamSelection">
        <div id="teamA" class="teamSelectionBox">
            <h3>Team A</h3>
            <img src="TEAM BADGES\AFCBournemouth.png" alt="AFC Bournemouth">
        </div>
        <div id="teamB" class="teamSelectionBox">
            <h3>Team B</h3>
            <img src="TEAM BADGES\AFCBournemouth.png" alt="AFC Bournemouth">
        </div>
    </div>
    <button id="confirmBtn" disabled>Confirm</button>
    <div id="footer"></div>

    <script>
        $(function(){
            // Load header and footer
            $("#header").load("header.html");
            $("#footer").load("footer.html");

            // Fetch and display teams based on selected season
            $("#season").change(function() {
                var selectedSeason = $(this).val();
                // Fetch teams for the selected season and populate Box A and Box B
                fetchTeams(selectedSeason);
            });

            // Handle team selection and enable/disable confirm button
            $(".teamSelectionBox").on("click", function() {
                // Remove selected class from all boxes
                $(".teamSelectionBox").removeClass("selected");
                // Add selected class to the clicked box
                $(this).addClass("selected");
                var teamName = $(this).find("img").attr("alt");
                var boxId = $(this).attr("id");
                var otherBoxId = (boxId === "teamA") ? "teamB" : "teamA";
                // Remove the selected team from the other box
                $("#" + otherBoxId + " img[alt='" + teamName + "']").remove();
                // Enable confirm button if both boxes have a team selected
                if ($("#teamA img").length > 0 && $("#teamB img").length > 0) {
                    $("#confirmBtn").prop("disabled", false);
                } else {
                    $("#confirmBtn").prop("disabled", true);
                }
            });

            // Handle key events for team selection boxes
            $(".teamSelectionBox").on("keydown", function(event) {
                var keyCode = event.keyCode;
                var selectedBox = $(".teamSelectionBox.selected");
                var nextBox;
                // Handle arrow key events
                switch (keyCode) {
                    case 37: // Left arrow key
                        nextBox = selectedBox.prev(".teamSelectionBox");
                        break;
                    case 39: // Right arrow key
                        nextBox = selectedBox.next(".teamSelectionBox");
                        break;
                    default:
                        return; // Exit function if key pressed is not an arrow key
                }
                // Remove selected class from current box
                selectedBox.removeClass("selected");
                // Add selected class to the next box
                nextBox.addClass("selected");
            });

            // Handle confirm button click
            $("#confirmBtn").click(function() {
                var teamA = $("#teamA img").attr("alt");
                var teamB = $("#teamB img").attr("alt");
                var selectedSeason = $("#season").val();
                // Fetch and display CSV data for matches between teamA and teamB in selectedSeason
                fetchMatchData(teamA, teamB, selectedSeason);
            });
        });

        function fetchTeams(selectedSeason) {
            // Assuming teamsData is a JSON object containing data for each season
            // Teams data should be structured like: { "95-96": ["Team 1", "Team 2", ...], "96-97": [...], ... }
            // You need to replace teamsData with your actual data source
            var teamsData = {
                "95-96": [
                    "BlackburnRovers",
                    "Manchester United",
                    "Newcastle United",
                    "Liverpool",
                    "Leeds United",
                    "Tottenham Hotspur",
                    "Aston Villa",
                    "Arsenal",
                    "Chelsea",
                    "Wimbledon",
                    "Sheffield Wednesday",
                    "Everton",
                    "West Ham United",
                    "Coventry City",
                    "Southampton",
                    "Derby County",
                    "Sunderland",
                    "Ipswich Town",
                    "Leicester City",
                    "Nottingham Forest"
                ],
                // Add data for other seasons
            };

            // Clear the existing teams in Team A and Team B
            $("#teamA").empty();
            $("#teamB").empty();

            // Fetch teams for the selected season from the data source
            var teamsForSeason = teamsData[selectedSeason];

            // Populate teams in Team A and Team B
            if (teamsForSeason && teamsForSeason.length >= 20) {
                // Assuming you have an array of team badges/images, you can iterate over it
                // and append images for each team in Team A and Team B
                teamsForSeason.slice(0, 20).forEach(function(teamName) {
                    var teamImage = $("<img>").attr("src", "TEAM BADGES/" + teamName.toUpperCase() + ".png").attr("alt", teamName);
                    $("#teamA").append(teamImage.clone());
                    $("#teamB").append(teamImage.clone());
                });
            }
        }

        function fetchMatchData(teamA, teamB, selectedSeason) {
            // Fetch and display CSV data for matches between teamA and teamB in selectedSeason
        }

        function toggleDropdown() {
            var dropdown = document.getElementById("season");
            dropdown.classList.toggle("show");
        }

        // Close the dropdown if the user clicks outside of it
        window.onclick = function(event) {
            if (!event.target.matches('#season')) {
                var dropdowns = document.getElementsByClassName("dropdown-content");
                for (var i = 0; i < dropdowns.length; i++) {
                    var openDropdown = dropdowns[i];
                    if (openDropdown.classList.contains('show')) {
                        openDropdown.classList.remove('show');
                    }
                }
            }
        }
    </script>
</body>
</html>
